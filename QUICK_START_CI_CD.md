# üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç CI/CD

## ‚ö° –ë—ã—Å—Ç—Ä–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ (5 –º–∏–Ω—É—Ç)

### 1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ DNS (–µ—Å–ª–∏ –µ—â–µ –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ)

```
–î–æ–±–∞–≤—å—Ç–µ –≤ –ø–∞–Ω–µ–ª–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–æ–º–µ–Ω–æ–º:
- A –∑–∞–ø–∏—Å—å: dev ‚Üí 89.111.169.243
- A –∑–∞–ø–∏—Å—å: staging ‚Üí 89.111.169.243
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ GitHub Secrets

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ GitHub CLI
brew install gh  # macOS
# –∏–ª–∏ —Å–∫–∞—á–∞–π—Ç–µ —Å https://cli.github.com/

# –ê–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—å
gh auth login

# –ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Å–µ–∫—Ä–µ—Ç—ã
./scripts/setup-github-secrets.sh
```

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ SSL –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

```bash
# –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É
ssh root@89.111.169.243

# –ù–∞—Å—Ç—Ä–æ–π—Ç–µ SSL
cd /var/www/prod
./scripts/setup-ssl.sh
```

### 4. –ó–∞–ø—É—Å–∫ –ø–µ—Ä–≤–æ–π —Å—Ä–µ–¥—ã

```bash
# –°–æ–∑–¥–∞–π—Ç–µ –≤–µ—Ç–∫—É dev
git checkout -b dev
git push origin dev

# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π –Ω–∞ https://dev.–ø—Ä–∏–±—ã–ª.—Ä—Ñ
```

## üîÑ Workflow —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

### –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –Ω–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–∏:

```bash
# 1. –°–æ–∑–¥–∞–π—Ç–µ feature –≤–µ—Ç–∫—É
git checkout -b feature/new-feature
git checkout dev

# 2. –†–∞–∑—Ä–∞–±–∞—Ç—ã–≤–∞–π—Ç–µ
# ... –ø–∏—à–∏—Ç–µ –∫–æ–¥ ...

# 3. –ü—É—à –≤ dev (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π)
git push origin dev
# ‚Üí –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–µ–ø–ª–æ–∏—Ç—Å—è –Ω–∞ https://dev.–ø—Ä–∏–±—ã–ª.—Ä—Ñ
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:

```bash
# 1. –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç–µ—Å—å –Ω–∞ staging
git checkout staging
git merge dev
git push origin staging

# 2. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π –Ω–∞ https://staging.–ø—Ä–∏–±—ã–ª.—Ä—Ñ
```

### –ü—Ä–æ–¥–∞–∫—à–Ω:

```bash
# 1. –î–µ–ø–ª–æ–π –≤ –ø—Ä–æ–¥–∞–∫—à–Ω
git checkout main
git merge staging
git push origin main

# 2. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π –Ω–∞ https://–ø—Ä–∏–±—ã–ª.—Ä—Ñ
```

## üõ†Ô∏è –ö–æ–º–∞–Ω–¥—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞:

```bash
./scripts/status.sh
```

### –†—É—á–Ω–æ–π –¥–µ–ø–ª–æ–π (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ):

```bash
./scripts/deploy-dev.sh      # Dev —Å—Ä–µ–¥–∞
./scripts/deploy-staging.sh  # Staging —Å—Ä–µ–¥–∞
./scripts/deploy-production.sh # Production —Å—Ä–µ–¥–∞
```

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:

```bash
./scripts/server-manage.sh dev      # Dev –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
./scripts/server-manage.sh staging  # Staging –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
./scripts/server-manage.sh prod     # Production –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
```

## üåê –î–æ—Å—Ç—É–ø–Ω—ã–µ —Å—Ä–µ–¥—ã

- **üîÑ Development**: https://dev.–ø—Ä–∏–±—ã–ª.—Ä—Ñ (hot reload, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π —Å –≤–µ—Ç–∫–∏ `dev`)
- **üß™ Staging**: https://staging.–ø—Ä–∏–±—ã–ª.—Ä—Ñ (—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π —Å –≤–µ—Ç–∫–∏ `staging`)
- **üöÄ Production**: https://–ø—Ä–∏–±—ã–ª.—Ä—Ñ (–ø—Ä–æ–¥–∞–∫—à–Ω, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π —Å –≤–µ—Ç–∫–∏ `main`)

## üì± –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Telegram –±–æ—Ç–∞ –≤—ã –±—É–¥–µ—Ç–µ –ø–æ–ª—É—á–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è:

- ‚úÖ –£—Å–ø–µ—à–Ω—ã–π –¥–µ–ø–ª–æ–π
- ‚ùå –û—à–∏–±–∫–∞ –¥–µ–ø–ª–æ—è
- üß™ –°—Ç–∞—Ç—É—Å —Ç–µ—Å—Ç–æ–≤

## üö® Troubleshooting

### –î–æ–º–µ–Ω—ã –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞—é—Ç—Å—è:

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ DNS
nslookup dev.–ø—Ä–∏–±—ã–ª.—Ä—Ñ
nslookup staging.–ø—Ä–∏–±—ã–ª.—Ä—Ñ

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ SSL
sudo certbot certificates
```

### –ü—Ä–æ–±–ª–µ–º—ã —Å –¥–µ–ø–ª–æ–µ–º:

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å
./scripts/status.sh

# –ü—Ä–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏
docker-compose logs -f
```

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —É –≤–∞—Å –±—É–¥–µ—Ç:

- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π CI/CD** - –¥–µ–ø–ª–æ–π –ø—Ä–∏ –∫–∞–∂–¥–æ–º push
- ‚úÖ **–¢—Ä–∏ —Å—Ä–µ–¥—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏** —Å SSL
- ‚úÖ **Hot reload** –¥–ª—è –±—ã—Å—Ç—Ä–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- ‚úÖ **Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** –æ —Å—Ç–∞—Ç—É—Å–µ
- ‚úÖ **–ü—Ä–æ—Å—Ç–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ** —á–µ—Ä–µ–∑ Git –≤–µ—Ç–∫–∏

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å: `./scripts/status.sh`
2. –ü—Ä–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏: `docker-compose logs -f`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ GitHub Actions –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏
